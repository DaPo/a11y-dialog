!function(t){"use strict";function e(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}function n(t){var n=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([value="-1"])'];return o(n.join(","),t).filter(function(t){return e(t)})}function i(t,e){return(e||document).querySelector(t)}function o(t,e){var n=(e||document).querySelectorAll(t);return n.length?Array.prototype.slice.call(n):[]}function a(t,e){var i=n(t),o=document.activeElement,a=i.indexOf(o);e.shiftKey&&0===a?(i[i.length-1].focus(),e.preventDefault()):e.shiftKey||a!==i.length-1||(i[0].focus(),e.preventDefault())}function s(t){t.$openers.forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation(),t.show()})}),t.$closers.forEach(function(e){e.addEventListener("click",function(e){t.hide()})}),document.addEventListener("keydown",function(e){t.shown!==!1&&(27===e.which&&(e.preventDefault(),t.hide()),9===e.which&&a(t.$modal,e))}),document.body.addEventListener("focus",function(e){t.shown&&!t.$modal.contains(e.target)&&d(t.$modal)},!0),document.addEventListener("click",function(e){t.shown!==!1&&t.hide()}),t.$modal.addEventListener("click",function(t){t.stopPropagation()})}function d(t){var e=n(t);e.length&&e[0].focus()}var l,r=function(t,e,n){this.$main=e||i("#main"),this.$overlay=n||i("#modal-overlay"),this.$modal=t,this.$openers=o('[data-modal-show="'+this.$modal.id+'"]'),this.$closers=o("[data-modal-hide]",this.$modal).concat(o('[data-modal-hide="'+this.$modal.id+'"]')),this.shown=!1,s(this)};r.prototype.show=function(){this.shown=!0,this.$main.setAttribute("aria-hidden","true"),this.$modal.setAttribute("aria-hidden","false"),this.$overlay.style.display="block",this.$modal.style.display="block",l=document.activeElement,d(this.$modal)},r.prototype.hide=function(){this.shown=!1,this.$modal.setAttribute("aria-hidden","true"),this.$main.setAttribute("aria-hidden","false"),this.$overlay.style.display="none",this.$modal.style.display="none",l.focus()},t.Modal=r}(window);